\documentclass{article}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{listings}
\lstset{keywords=test,keywordstyle=\fontfamily{ptm}\selectfont,extendedchars=true}
\usepackage[verbose,expansion=false]{microtype}
\SetProtrusion
   [inputenc = ansinew]
   {font=*/ptm/*/*/*}
   {ä = {0,0}}
\begin{document}
\begin{lstlisting}
  test
\end{lstlisting}
\end{document}
